# –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–±–ª–µ–º —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è Trading Bot

## –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. ‚ùå –ü–æ–º–∏–ª–∫–∞ "Quantity greater than max quantity"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—ó –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é, —è–∫–∞ –ø–µ—Ä–µ–≤–∏—â—É—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å (max_qty) –¥–ª—è —Å–∏–º–≤–æ–ª—ñ–≤ KAITOUSDT —Ç–∞ MYROUSDT.

**–ü—Ä–∏—á–∏–Ω–∞:** 
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ (`position_qty = position_usdt / current_price`) –Ω–µ –≤—Ä–∞—Ö–æ–≤—É—î –æ–±–º–µ–∂–µ–Ω–Ω—è max_qty –≤—ñ–¥ –±—ñ—Ä–∂—ñ
- –ú–µ—Ç–æ–¥ `_format_quantity` –º–∞–≤ –ª–æ–≥—ñ—á–Ω—É –ø–æ–º–∏–ª–∫—É –ø—Ä–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ñ –¥–æ step_size

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –º–µ—Ç–æ–¥ `_format_quantity` –≤ `exchange/binance_client.py` –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –≤–Ω–∏–∑ –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º max_qty
‚úÖ –î–æ–¥–∞–Ω–æ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è max_qty —á–µ—Ä–µ–∑ –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Ç–æ—á–Ω—ñ—Å—Ç—é —á–∏—Å–µ–ª –∑ –ø–ª–∞–≤–∞—é—á–æ—é –∫–æ–º–æ—é

### 2. ‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∏ "Hedge side mismatch"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å—Ç—ñ–π–Ω—ñ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Å—Ç–æ—Ä–æ–Ω–∏ hedge –ø–æ–∑–∏—Ü—ñ—ó.

**–ü—Ä–∏—á–∏–Ω–∞:**
- Binance –ø–æ–∫–∞–∑—É—î NET –ø–æ–∑–∏—Ü—ñ—é (–æ—Ä–∏–≥—ñ–Ω–∞–ª + hedge —Ä–∞–∑–æ–º), –∞ –Ω–µ –æ–∫—Ä–µ–º—ñ –ø–æ–∑–∏—Ü—ñ—ó
- –ö–æ–¥ –Ω–∞–º–∞–≥–∞–≤—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç–æ—Ä–æ–Ω—É hedge –∑ exchange, —â–æ –Ω–µ–º–æ–∂–ª–∏–≤–æ –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ hedge

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ –ª–æ–≥—ñ–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Å—Ç–æ—Ä–æ–Ω–∏ hedge –∑ exchange –≤ `core/hedge_manager.py`
‚úÖ Hedge —Å—Ç–æ—Ä–æ–Ω–∞ —Ç–µ–ø–µ—Ä –∑–∞–≤–∂–¥–∏ –¥–æ–≤—ñ—Ä—è—î—Ç—å—Å—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω—ñ–π —Å—Ç–æ—Ä–æ–Ω—ñ (–ø—Ä–æ—Ç–∏–ª–µ–∂–Ω–∞ –¥–æ parent)
‚úÖ –î–æ–¥–∞–Ω–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º, —á–æ–º—É –Ω–µ –º–æ–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑ exchange

### 3. ‚ö†Ô∏è –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è "Daily loss limit reached"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –ø—Ä–æ–¥–æ–≤–∂—É—î –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –ø–æ–∑–∏—Ü—ñ—ó –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –¥–µ–Ω–Ω–æ–≥–æ –ª—ñ–º—ñ—Ç—É –≤—Ç—Ä–∞—Ç.

**–°—Ç–∞—Ç—É—Å:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è —Å–ø—Ä–∞—Ü—å–æ–≤—É—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ, –∞–ª–µ –±–æ—Ç –≤–∂–µ –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –Ω–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ `_check_daily_limits()` –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ó–º–µ–Ω—à–∏—Ç–∏ `DAILY_MAX_LOSS` –∞–±–æ `MAX_UNREALIZED_LOSS` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, —è–∫—â–æ —Ö–æ—á–µ—Ç–µ –±—ñ–ª—å—à –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—É —Ç–æ—Ä–≥—ñ–≤–ª—é.

---

## –°—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### ‚ùì –ó–∞–ø–∏—Ç–∞–Ω–Ω—è: "–ß–∏ —Å–ª—ñ–¥ –∑–∞–∫—Ä–∏–≤–∞—Ç–∏ –ø–æ–∑–∏—Ü—ñ—ó –∑–∞–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤?"

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:** –ù–Ü, –ø–æ—Ç–æ—á–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π! ‚úÖ

**–ü–æ—è—Å–Ω–µ–Ω–Ω—è:**

1. **STOP_MARKET / TAKE_PROFIT_MARKET –æ—Ä–¥–µ—Ä–∏ - –ù–ê–ô–ö–†–ê–©–ò–ô –≤–∏–±—ñ—Ä:**
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏ –≤ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
   - ‚úÖ –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ —Ü—ñ–Ω–∏
   - ‚úÖ –ü—Ä–∞—Ü—é—î –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –±–æ—Ç —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
   - ‚úÖ –ú–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ API (–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ü—ñ–Ω—É)

2. **MARKET –æ—Ä–¥–µ—Ä–∏ –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è - –ø–æ–≥–∞–Ω–∏–π –≤–∏–±—ñ—Ä:**
   - ‚ùå –ü–æ—Ç—Ä—ñ–±–µ–Ω –ø–æ—Å—Ç—ñ–π–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ü—ñ–Ω–∏
   - ‚ùå –ú–æ–∂–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –º—ñ—Ç–∫–∏ —á–µ—Ä–µ–∑ –∑–∞—Ç—Ä–∏–º–∫–∏
   - ‚ùå –î–æ–¥–∞—Ç–∫–æ–≤–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ API
   - ‚ùå –†–∏–∑–∏–∫ —Ç–æ–≥–æ, —â–æ –±–æ—Ç –Ω–µ —Å–ø—Ä–∞—Ü—é—î –≤ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –º–æ–º–µ–Ω—Ç

**–ü–æ—Ç–æ—á–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è (STOP_MARKET/TAKE_PROFIT_MARKET) - –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞!**

### üìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

#### 1. –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Å–∏–º–≤–æ–ª—ñ–≤ –∑–∞ max_qty

**–ü—Ä–æ–±–ª–µ–º–∞:** KAITOUSDT —Ç–∞ MYROUSDT –º–∞—é—Ç—å –¥—É–∂–µ –Ω–∏–∑—å–∫–∏–π max_qty, —â–æ —Ä–æ–±–∏—Ç—å —ó—Ö –Ω–µ–ø—Ä–∏–¥–∞—Ç–Ω–∏–º–∏ –¥–ª—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ –∑ –ø–æ—Ç–æ—á–Ω–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏.

**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä —Å–∏–º–≤–æ–ª—ñ–≤ –∑–∞ max_qty –ø–µ—Ä–µ–¥ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è–º:
- –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ max_qty –¥–ª—è —Å–∏–º–≤–æ–ª—É
- –ü—Ä–æ–ø—É—Å–∫–∞—Ç–∏ —Å–∏–º–≤–æ–ª–∏, –¥–µ max_qty –∑–∞–Ω–∞–¥—Ç–æ –º–∞–ª–∏–π –¥–ª—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É –ø–æ–∑–∏—Ü—ñ—ó
- –ê–±–æ –¥–æ–¥–∞—Ç–∏ —Ü—ñ —Å–∏–º–≤–æ–ª–∏ –¥–æ —á–æ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫—É

#### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–∏–∑–∏–∫—ñ–≤

**–ü–æ—Ç–æ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
- `MAX_POSITION_PERCENT = 0.25` (25% –±–∞–ª–∞–Ω—Å—É –Ω–∞ –ø–æ–∑–∏—Ü—ñ—é)
- `MAX_LOSS_PER_TRADE = 2.0 USDT`
- `DAILY_MAX_LOSS = 50.0 USDT`
- `MAX_UNREALIZED_LOSS = 50.0 USDT`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- ‚úÖ –ü–æ—Ç–æ—á–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ—Å–∏—Ç—å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ñ - –¥–æ–±—Ä–µ
- ‚ö†Ô∏è –Ø–∫—â–æ –±–∞–≥–∞—Ç–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å –ø—Ä–æ –¥–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç–∏, –º–æ–∂–Ω–∞ –∑–º–µ–Ω—à–∏—Ç–∏ `DAILY_MAX_LOSS` –¥–æ 30-40 USDT
- ‚úÖ `MAX_LOSS_PER_TRADE = 2.0 USDT` - –¥–æ–±—Ä–µ –¥–ª—è —Å–∫–∞–ª—å–ø—ñ–Ω–≥—É

#### 3. –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫

**–ü–æ—Ç–æ—á–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è:** –ü–æ–º–∏–ª–∫–∏ quantity too large –ª–æ–≥—É—é—Ç—å—Å—è, –∞–ª–µ –ø–æ–∑–∏—Ü—ñ—è –ø—Ä–æ—Å—Ç–æ –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –¶–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü–æ–º–∏–ª–∫–∏ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ - –ø–æ–∑–∏—Ü—ñ—è –Ω–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, –±–æ—Ç –ø—Ä–æ–¥–æ–≤–∂—É—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —ñ–Ω—à–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏.

#### 4. –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- ‚úÖ Telegram –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π - –¥–æ–±—Ä–µ
- üìä –î–æ–¥–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ —Å–∏–º–≤–æ–ª–∏, —è–∫—ñ –ø—Ä–æ–ø—É—â–µ–Ω—ñ —á–µ—Ä–µ–∑ quantity errors
- üìä –î–æ–¥–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ hedge –ø–æ–∑–∏—Ü—ñ—ó (—É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å, PnL)

---

## –ü—ñ–¥—Å—É–º–æ–∫

### ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É max_qty –≤ `_format_quantity`
2. –í–∏–¥–∞–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º–Ω—É –ª–æ–≥—ñ–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó hedge side
3. –î–æ–¥–∞–Ω–æ –∫—Ä–∞—â—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é

### ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å:
1. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è STOP_MARKET/TAKE_PROFIT_MARKET –æ—Ä–¥–µ—Ä—ñ–≤ - –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä
2. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ quantity - –∫–æ—Ä–µ–∫—Ç–Ω–∞
3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–∏–∑–∏–∫—ñ–≤ - –∞–¥–µ–∫–≤–∞—Ç–Ω—ñ

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ:
1. –î–æ–¥–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é —Å–∏–º–≤–æ–ª—ñ–≤ –∑–∞ max_qty
2. –ú–æ–∂–ª–∏–≤–æ –∑–º–µ–Ω—à–∏—Ç–∏ `DAILY_MAX_LOSS` —è–∫—â–æ –±–∞–≥–∞—Ç–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å
3. –î–æ–¥–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–ø—É—â–µ–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤

---

**–í–∏—Å–Ω–æ–≤–æ–∫:** –í–∞—à –±–æ—Ç –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –±—É–ª–∏ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–º–∏ (–æ–±—Ä–æ–±–∫–∞ max_qty —Ç–∞ hedge sync), —è–∫—ñ —Ç–µ–ø–µ—Ä –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ. –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ - –ø—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ STOP_MARKET/TAKE_PROFIT_MARKET.
