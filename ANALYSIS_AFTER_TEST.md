# –ê–Ω–∞–ª—ñ–∑ –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–æ—Ç–∞

## –í–∏—è–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞

### ‚ùå ERROR: `PositionState` is not defined

**–õ–æ–∫–∞—Ü—ñ—è:** `main.py`, —Ñ—É–Ω–∫—Ü—ñ—è `_check_urgent_breakeven_sl()`, –ª—ñ–Ω—ñ—è 581

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
ERROR:__main__:Error in urgent breakeven check for 865f42dc: name 'PositionState' is not defined
ERROR:__main__:Error in urgent breakeven check for 002b40a9: name 'PositionState' is not defined
```

**–ü—Ä–∏—á–∏–Ω–∞:** `PositionState` –Ω–µ –±—É–≤ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏–π –≤ `main.py`, —Ö–æ—á–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è –≤ –∫–æ–¥—ñ.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** ‚úÖ –î–æ–¥–∞–Ω–æ —ñ–º–ø–æ—Ä—Ç:
```python
from core.position_tracker import PositionTracker, PositionState
```

## –°–ø—Ä–æ–±–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è SL

### ‚ö†Ô∏è WARNING: SL price too close to current price

–í–∏—è–≤–ª–µ–Ω–æ –∫—ñ–ª—å–∫–∞ —Å–ø—Ä–æ–± –æ–Ω–æ–≤–ª–µ–Ω–Ω—è SL, —è–∫—ñ –Ω–µ –≤–¥–∞–ª–∏—Å—è —á–µ—Ä–µ–∑ —Ç–µ, —â–æ –Ω–æ–≤–∞ —Ü—ñ–Ω–∞ SL –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–∞ –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó —Ü—ñ–Ω–∏:

```
WARNING:core.order_manager:SL price too close to current price, skipping
WARNING:core.position_tracker:[PROMUSDT] ‚ùå SL UPDATE FAILED: SL too close to current price | Old SL: 8.34393193 | Attempted: 8.30014906 | Current: 8.29900000 | PnL: 0.45 USDT | Side=SHORT | Qty=132.471893
```

**–ê–Ω–∞–ª—ñ–∑:** –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ - –±–æ—Ç –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –æ–Ω–æ–≤–∏—Ç–∏ SL –Ω–∞ breakeven, –∞–ª–µ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –Ω–µ –¥–æ–∑–≤–æ–ª—è—î. –¶–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞.

## Hedge –ø–æ–∑–∏—Ü—ñ—ó

### ‚úÖ Hedge labels –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ó –≤–∏–≤–æ–¥—É –≤–∏–¥–Ω–æ, —â–æ hedge –ø–æ–∑–∏—Ü—ñ—ó –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∑ `[HEDGE]` labels:
- `[XPLUSDT] SHORT[HEDGE]`
- `[ETHUSDT] SHORT[HEDGE]`
- `[GRIFFAINUSDT] SHORT[HEDGE]`
- `[EPTUSDT] SHORT[HEDGE]`
- `[PENGUUSDT] LONG[HEDGE]`
- `[HANAUSDT] LONG[HEDGE]`
- `[PARTIUSDT] SHORT[HEDGE]`
- `[DAMUSDT] LONG[HEDGE]`

**–í–∏—Å–Ω–æ–≤–æ–∫:** –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó hedge –ø—Ä–∞—Ü—é—î - –ø–æ–∑–∏—Ü—ñ—ó –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∑–Ω–∞—á–∞—é—Ç—å—Å—è —è–∫ hedge.

## –ó–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ü–æ–∑–∏—Ç–∏–≤–Ω—ñ –º–æ–º–µ–Ω—Ç–∏:
1. –ë–æ—Ç –ø—Ä–∞—Ü—é—î –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫ (–æ–∫—Ä—ñ–º –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ—ó)
2. Hedge –ø–æ–∑–∏—Ü—ñ—ó –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è
3. –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î –¥–µ—Ç–∞–ª—å–Ω–æ
4. –ü–æ–∑–∏—Ü—ñ—ó –≤—ñ–¥—Å—Ç–µ–∂—É—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### ‚ö†Ô∏è –í–∏—è–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏:
1. ‚ùå `PositionState` –Ω–µ –±—É–≤ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏–π (–í–ò–ü–†–ê–í–õ–ï–ù–û)
2. ‚ö†Ô∏è –î–µ—è–∫—ñ —Å–ø—Ä–æ–±–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è SL –Ω–µ –≤–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å (–Ω–æ—Ä–º–∞–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

1. ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–¥–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç `PositionState` –≤ `main.py`
2. ‚è≥ **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ reconciliation –æ–ø–µ—Ä–∞—Ü—ñ–π
3. üìä **–ê–Ω–∞–ª—ñ–∑:** –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ reconciliation –ø—ñ—Å–ª—è —Ç—Ä–∏–≤–∞–ª—ñ—à–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ
2. ‚è≥ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
3. ‚è≥ –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ç—è–≥–æ–º –≥–æ–¥–∏–Ω–∏
4. ‚è≥ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ reconciliation –æ–ø–µ—Ä–∞—Ü—ñ–π
