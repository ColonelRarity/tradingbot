# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º –∑ breakeven SL

## üî¥ –ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê: –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ breakeven SL –¥–ª—è –ø—Ä–∏–±—É—Ç–∫–æ–≤–∏—Ö –ø–æ–∑–∏—Ü—ñ–π

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏–±—É—Ç–∫–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó –Ω–µ –º–æ–∂—É—Ç—å –æ–Ω–æ–≤–∏—Ç–∏ SL —á–µ—Ä–µ–∑ –¥–≤—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏:
1. **"SL too close to current price"** (154 —Ä–∞–∑–∏) - –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å 0.05% –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∞
2. **"Margin is insufficient"** (450 —Ä–∞–∑—ñ–≤) - cooldown 5 —Ö–≤–∏–ª–∏–Ω –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏–π –¥–ª—è breakeven SL

**–ù–∞—Å–ª—ñ–¥–∫–∏:**
- –ü—Ä–∏–±—É—Ç–∫–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –±–µ–∑ –∑–∞—Ö–∏—Å—Ç—É
- –ö–æ–ª–∏ —Ü—ñ–Ω–∞ —Ä–æ–∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è, –≤–µ—Å—å –ø—Ä–∏–±—É—Ç–æ–∫ –≤—Ç—Ä–∞—á–∞—î—Ç—å—Å—è
- –ü–æ–∑–∏—Ü—ñ—ó –ø–µ—Ä–µ—Ö–æ–¥—è—Ç—å —É –∑–±–∏—Ç–æ–∫ –±–µ–∑ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∑–∞–∫—Ä–∏—Ç–∏—Å—è –Ω–∞ breakeven
- –ó–∞ –Ω—ñ—á –º—ñ–Ω—É—Å –º–∞–π–∂–µ 2000 USDT PnL

### –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

#### 1. –ó–º–µ–Ω—à–µ–Ω–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å –¥–ª—è breakeven SL (`core/order_manager.py`)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å 0.05% –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∞ –¥–ª—è breakeven SL, –æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è SHORT –ø–æ–∑–∏—Ü—ñ–π.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –î–æ–¥–∞–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä `is_breakeven` –¥–æ `place_stop_loss` —Ç–∞ `update_stop_loss`
- –î–ª—è breakeven SL –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –∑–º–µ–Ω—à–µ–Ω–∞ –¥–æ 0.01% (0.0001) –∑–∞–º—ñ—Å—Ç—å 0.05% (0.0005)
- –î–æ–∑–≤–æ–ª–µ–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ SL –¥—É–∂–µ –±–ª–∏–∑—å–∫–æ –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó —Ü—ñ–Ω–∏ –¥–ª—è breakeven SL
- –Ø–∫—â–æ breakeven SL –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ—Ä–µ–≥—É—î—Ç—å—Å—è –¥–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –≤—ñ–¥—Å—Ç–∞–Ω—ñ

**–ö–æ–¥:**
```python
# For breakeven SL, use smaller minimum distance (0.01% instead of 0.05%)
# and allow SL to be closer to current price to protect profits
min_distance_multiplier = 0.0001 if is_breakeven else 0.0005

# For breakeven, try to set SL at minimum distance if too close
if is_breakeven:
    stop_price = current_price - min_distance  # For LONG
    # or
    stop_price = current_price + min_distance  # For SHORT
```

**–©–æ —Ü–µ –≤–∏—Ä—ñ—à—É—î:**
- –ü—Ä–∏–±—É—Ç–∫–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑–º–æ–∂—É—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ breakeven SL –Ω–∞–≤—ñ—Ç—å –∫–æ–ª–∏ —Ü—ñ–Ω–∞ –¥—É–∂–µ –±–ª–∏–∑—å–∫–∞
- –ú–µ–Ω—à–µ –≤—Ç—Ä–∞—Ç –ø—Ä–∏–±—É—Ç–∫—É —á–µ—Ä–µ–∑ –Ω–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ breakeven SL

#### 2. –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É margin errors –¥–ª—è breakeven SL (`core/position_tracker.py`)

**–ü—Ä–æ–±–ª–µ–º–∞:** Cooldown 5 —Ö–≤–∏–ª–∏–Ω –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏–π –¥–ª—è breakeven SL, —â–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –ø—Ä–∏–±—É—Ç–∫—É.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –î–ª—è breakeven SL cooldown –∑–º–µ–Ω—à–µ–Ω–æ –¥–æ 1 —Ö–≤–∏–ª–∏–Ω–∏ –∑–∞–º—ñ—Å—Ç—å 5 —Ö–≤–∏–ª–∏–Ω
- –î–ª—è –∑–≤–∏—á–∞–π–Ω–∏—Ö SL updates cooldown –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è 5 —Ö–≤–∏–ª–∏–Ω
- –ü–æ–∑–∏—Ü—ñ—ó –∑ breakeven SL –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –≤ urgent check –¥–ª—è —à–≤–∏–¥—à–æ–≥–æ retry

**–ö–æ–¥:**
```python
# For breakeven SL, use shorter cooldown (1 minute instead of 5)
# For regular SL updates, use normal cooldown (5 minutes)
if sl_update.is_breakeven:
    cooldown_duration = 60.0  # 1 minute for breakeven SL
else:
    cooldown_duration = self._sl_update_cooldown_duration  # 5 minutes for regular SL
```

**–©–æ —Ü–µ –≤–∏—Ä—ñ—à—É—î:**
- –®–≤–∏–¥—à–∏–π retry –¥–ª—è breakeven SL (1 —Ö–≤–∏–ª–∏–Ω–∞ –∑–∞–º—ñ—Å—Ç—å 5)
- –ú–µ–Ω—à–µ –≤—Ç—Ä–∞—Ç –ø—Ä–∏–±—É—Ç–∫—É —á–µ—Ä–µ–∑ —à–≤–∏–¥—à–∏–π retry
- –ö—Ä–∞—â–∏–π –∑–∞—Ö–∏—Å—Ç –ø—Ä–∏–±—É—Ç–∫–æ–≤–∏—Ö –ø–æ–∑–∏—Ü—ñ–π

#### 3. –ü–µ—Ä–µ–¥–∞–Ω–æ `is_breakeven` –≤ —É—Å—ñ –≤–∏–∫–ª–∏–∫–∏ `update_stop_loss`

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
- –î–æ–¥–∞–Ω–æ `is_breakeven=True` –≤ `check_and_enforce_breakeven_sl_urgent`
- –î–æ–¥–∞–Ω–æ `is_breakeven=sl_update.is_breakeven` –≤ –∑–≤–∏—á–∞–π–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è SL
- –¶–µ –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –º–µ–Ω—à—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –≤—ñ–¥—Å—Ç–∞–Ω—å –¥–ª—è breakeven SL

**–©–æ —Ü–µ –≤–∏—Ä—ñ—à—É—î:**
- Breakeven SL –º–æ–∂–µ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–∞–≤—ñ—Ç—å –∫–æ–ª–∏ —Ü—ñ–Ω–∞ –¥—É–∂–µ –±–ª–∏–∑—å–∫–∞
- –ú–µ–Ω—à–µ –ø–æ–º–∏–ª–æ–∫ "SL too close to current price" –¥–ª—è breakeven SL

### –†–µ–∑—É–ª—å—Ç–∞—Ç

1. **–ú–µ–Ω—à–∞ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å –¥–ª—è breakeven SL** - 0.01% –∑–∞–º—ñ—Å—Ç—å 0.05%
2. **–®–≤–∏–¥—à–∏–π retry –¥–ª—è breakeven SL** - 1 —Ö–≤–∏–ª–∏–Ω–∞ –∑–∞–º—ñ—Å—Ç—å 5 —Ö–≤–∏–ª–∏–Ω
3. **–ö—Ä–∞—â–∏–π –∑–∞—Ö–∏—Å—Ç –ø—Ä–∏–±—É—Ç–∫–æ–≤–∏—Ö –ø–æ–∑–∏—Ü—ñ–π** - breakeven SL –º–æ–∂–µ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π —à–≤–∏–¥—à–µ
4. **–ú–µ–Ω—à–µ –≤—Ç—Ä–∞—Ç –ø—Ä–∏–±—É—Ç–∫—É** - –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑–º–æ–∂—É—Ç—å –∑–∞–∫—Ä–∏—Ç–∏—Å—è –Ω–∞ breakeven

### –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∏–º—ñ—Ç–∫–∏

1. **–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å 0.01%** - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –Ω–µ–≥–∞–π–Ω–æ–≥–æ trigger, –∞–ª–µ –¥–æ–∑–≤–æ–ª—è—î –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ breakeven SL
2. **Cooldown 1 —Ö–≤–∏–ª–∏–Ω–∞ –¥–ª—è breakeven** - –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –º–∞—Ä–∂–∞ –º–æ–≥–ª–∞ –∑–º—ñ–Ω–∏—Ç–∏—Å—è, –∞–ª–µ –Ω–µ –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–æ
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ—Ä–µ–∫—Ü—ñ—è** - —è–∫—â–æ breakeven SL –∑–∞–Ω–∞–¥—Ç–æ –±–ª–∏–∑—å–∫–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ—Ä–µ–≥—É—î—Ç—å—Å—è –¥–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –≤—ñ–¥—Å—Ç–∞–Ω—ñ

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞ —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ breakeven SL –º–æ–∂–µ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è –ø—Ä–∏–±—É—Ç–∫–æ–≤–∏—Ö –ø–æ–∑–∏—Ü—ñ–π
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –≤—ñ–¥—Å—Ç–∞–Ω—å 0.01% –¥–æ—Å—Ç–∞—Ç–Ω—è –¥–ª—è breakeven SL
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ cooldown 1 —Ö–≤–∏–ª–∏–Ω–∞ –ø—Ä–∞—Ü—é—î –¥–ª—è breakeven SL
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∏–±—É—Ç–∫–æ–≤—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑–º–æ–∂—É—Ç—å –∑–∞–∫—Ä–∏—Ç–∏—Å—è –Ω–∞ breakeven
